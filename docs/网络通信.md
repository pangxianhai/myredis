# 类设计

![Image text](images/网络通信类图.png)


# 服务启动

* 客户端信息

```go
package xxx
import  "net" 

type Client struct{
  //标记
  flag uint8
  //客户端ID 由服务器生产
  id uint32
  //客户端地址
  address string
  // tcp 连接通道
  conn net.Conn
}

```

* Tcp服务器启动过程

![Image text](images/Tcp服务启动过程.png)

# 通信协议

整个通信采用 tcp 长连接模式，协议采用 protocol 协议

* protocol 协议

整个数据以二进制为基础

4位 header 表示消息长度

```go
package xxx

//数据包定义
type Package struct{
  //需要接受的长度
  len uint32
  //已经接受的长度
  accept uint32
  //已经接受的数据
  byte []byte
}

```

* 接收数据过程

![Image text](images/Tcp数据接收过程.png)